{% extends 'admin/admin_navigation.html' %}

{% block title %}
API List | {{ super() }}
{% endblock %}

{% block header %}
{{ super() }}
{% endblock %}

{% block body %}
{{ super() }}

<div class="container-fluid bg-none">
    <div
         class="d-flex mx-auto mx-md-5 mt-md-3 justify-content-center align-items-center text-nowrap">
        <p class="adminControlsTitleText">API List</p>
    </div>
    <hr class="mediumDivider mx-auto" style="color:white;" />
    <div class="adminProxyList mx-auto mx-lg-3 mx-xl-5">
        <div
             class="row justify-content-center row-cols-auto gx-1 gx-lg-2 gx-xl-3 gx-xxl-4 gy-1 gy-xl-2 gy-xxl-3">
            {% if api_list %}
            {% for i in api_list %}
            <div class="col-auto">
                <div
                     class="adminProxyListLink figure rounded bg-dark px-lg-1 px-xl-2 px-xxl-3 py-1 py-lg-2">
                    <span style="font-size:23px;">{{i.nice_name}}</span><br />
                    <hr class="mx-5" style="color:white;" />
                    <span style="font-size:18px;">Requests:
                        {{i.requests_count}}</span><br />
                    <span style="font-size:16px;">Failed Requests:
                        {{i.failed_count}}</span><br />
                    <span style="font-size:18px;">Last Access: {{i.last_access}}
                    </span><br />
                    {% if i.disabled == 0 %}
                    <button class="btn-linkAdmin rounded bg-danger"
                            onclick="toggleAPI(event, {{i.id}});">Disable
                    </button>
                    {% else %}
                    <button class="btn-linkAdmin rounded bg-success"
                            onclick="toggleAPI(event, {{i.id}});">Enable
                    </button>
                    {% endif %}
                    <hr class="mx-5" style="color:white;" />
                    <span class="fluidLongTextFlex">{{i.url}}</span>
                </div>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
<hr class="smallestDivider mx-auto" style="color:white;" />
{% with admin_dash = url_for('admin.admin') %}
<div
     class="d-flex mx-auto mx-md-5 mt-md-3 justify-content-center align-items-center text-nowrap">
    <button id="cancel" name="cancel" type="button"
            class="adminDashButton btn-primary bg-success text-light py-1 mb-5 placeholder-wave"
            onclick="location.href='{{admin_dash}}'">
        Home
    </button>
</div>
{% endwith %}
{% endblock %}

{% block javascript %}
{{ super() }}
<script src="{{ url_for('admin.static', filename='scripts/api_list.js') }}"
        type="text/javascript"></script>
<script src="{{ url_for('admin.static', filename='scripts/api_list_rest.js') }}"
        type="text/javascript"></script>
{% endblock %}